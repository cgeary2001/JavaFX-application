import javafx.application.Application;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
import java.io.File;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
import javafx.event.EventHandler;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
import javafx.geometry.Insets;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
import javafx.scene.Scene;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
import javafx.scene.control.Button;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
import javafx.scene.input.MouseEvent;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
import javafx.scene.layout.VBox;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
import javafx.stage.FileChooser;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
import javafx.stage.Stage;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
import javafx.scene.image.Image;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
import javafx.scene.image.ImageView;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
import javafx.scene.text.*;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
import java.net.*;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
import java.io.*;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
public class Main extends Application // Open main class                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
{                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
    @Override                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
    public void start(Stage primaryStage) // Open start method (contains all visuals and most functionality)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
    {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        FileChooser fileChooser = new FileChooser();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
        Button button = new Button("Open to choose file");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        VBox root = new VBox();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
        root.setPadding(new Insets(10));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
        root.setSpacing(5);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
        root.getChildren().addAll(button);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        Scene scene = new Scene(root, 400, 200); // Set size for display                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
        primaryStage.setTitle("Add New Attachment");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
        primaryStage.setScene(scene);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        primaryStage.show();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        button.onMouseClickedProperty().set(new EventHandler<MouseEvent>()  // When button is clicked, proceed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
        {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
            @Override                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
            public void handle(MouseEvent event)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
            {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                configuringFileChooser(fileChooser); // Configure file chooser                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                fileChooser.setTitle("Open Resource File"); // Set window title                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                File selectedFile = fileChooser.showOpenDialog(primaryStage);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                Text t = new Text();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                if(selectedFile != null)// if file is selected, display file                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                    t.setText(selectedFile.getName()); // Display Filename                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                    root.getChildren().add(t); // Add filename to screen                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                    primaryStage.setScene(scene);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                    Image image  = new Image(selectedFile.toURI().toString()); // Create new image                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                    ImageView iv = new ImageView(image); // Create image view                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                    iv.setFitHeight(100); // Set image height                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                    iv.setFitWidth(100); // Set image width                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                    root.getChildren().add(iv);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                    primaryStage.setScene(scene);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                    primaryStage.show();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                else // Display error in text to user                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                    t.setText("YOU HAVE NOT SELECTED A FILE");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
            }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
        });                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
    }   // Close start method                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    // Method for configuring file chooser/setting filters                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
    private void                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    configuringFileChooser(FileChooser fileChooser)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
    {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        // Set title for FileChooser                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
        fileChooser.setTitle("Select File");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        // Set Initial Directory                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        fileChooser.setInitialDirectory(new File(System.getProperty("user.home")));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        // Add Extension Filters                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        fileChooser.getExtensionFilters().addAll(//                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                new FileChooser.ExtensionFilter("JPEG", "*.jpeg"),                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                new FileChooser.ExtensionFilter("PNG", "*.png"),                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                new FileChooser.ExtensionFilter("DOC", "*.doc"));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    }   // Close configuring File Chooser method                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    private final String tenantId;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
    private final String authToken;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    public Main()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
    {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        String tenantId = "Team18";                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
        String authToken = "ddd8af7c-3e22-4d31-aefa-3e834071c954";                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
        this.tenantId = tenantId;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
        this.authToken = authToken;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
    }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    // Method for connecting to API and sending file to API                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
    public void createTimelineEventAttachment (String TimelineEventIdKey, String TimelineEventIdVal, String AttachmentIdKey, String AttachmentIdVal, String TitleKey, String TitleVal, File selectedFile ) throws Exception                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
    {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        URL url = new URL("https://gcu.ideagen-development.com/TimelineEventAttachment/Create");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        httpCon.setDoOutput(true);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
        httpCon.setRequestMethod("PUT");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
        httpCon.setRequestProperty("tenantId", tenantId);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
        httpCon.setRequestProperty("AuthToken", authToken);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
        httpCon.setRequestProperty(TimelineEventIdKey, TimelineEventIdVal);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
        httpCon.setRequestProperty(AttachmentIdKey, AttachmentIdVal);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        httpCon.setRequestProperty(TitleKey, TitleVal);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
        httpCon.setRequestProperty("Image", selectedFile.getName());                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
        OutputStreamWriter out = new OutputStreamWriter(httpCon.getOutputStream());                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
        out.write("{'TenantId':'Team18', 'AuthToken':'ddd8af7c-3e22-4d31-aefa-3e834071c954', "+"'"+TimelineEventIdKey+"':'"+TimelineEventIdVal+"','"+AttachmentIdKey+"':'"+AttachmentIdVal+"','"+TitleKey+"':'"+TitleVal+"','"+"Image"+"':'"+selectedFile.getName()+"}");                                                                                                                                                                                                                                                                                                                                                                                                                                                     
        out.close();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        BufferedReader in = new BufferedReader(new InputStreamReader(httpCon.getInputStream()));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        String inputLine;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
        StringBuffer response = new StringBuffer();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        // The code below is as far as I got from the C#                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
        // although all online resources had this byte array in common but the out.write seems to have a problem                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        FileInputStream fs = new FileInputStream(selectedFile);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
        byte[] buffer = new byte[4096];                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
        int bytesRead;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
        while((bytesRead = fs.read(buffer, 0, buffer.length)) >0)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
        {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
            out.write(buffer, 0, bytesRead);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
        }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
        while ((inputLine = in.readLine()) != null)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
        {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
            response.append(inputLine);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
        }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
        in.close();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
        System.out.println(response.toString());                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    }   // Close create timeline event attachment                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    public static void main(String[] args)  // Main method                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
    {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        Application.launch(args);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
    }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
} // close main class                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
